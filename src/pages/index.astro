---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import BaseLayout from "../layouts/BaseLayout.astro";
import Button from "../components/Button.astro";
import Overline from "../components/Overline.astro";
import InfoCard from "../components/InfoCard.astro";
import TestimonialCard from "../components/TestimonialCard.astro";
import ProjectCard from "../components/ProjectCard.astro";
import CTA from "../components/CTA.astro";

import heroImage from "../assets/images/hero.jpg";
import avatar1 from "../assets/images/avatar-1.jpg";
import avatar2 from "../assets/images/avatar-2.jpg";
import avatar3 from "../assets/images/avatar-3.jpg";

import bento1 from "../assets/images/gallery-1.jpg";
import bento2 from "../assets/images/gallery-2.jpg";
import bento3 from "../assets/images/gallery-3.jpg";
import bento4 from "../assets/images/gallery-4.jpg";
import bento5 from "../assets/images/project-1.jpg";
import bento6 from "../assets/images/project-2.jpg";

import logo1 from "../assets/logos/logo-01.svg?raw";
import logo2 from "../assets/logos/logo-02.svg?raw";
import logo3 from "../assets/logos/logo-03.svg?raw";
import logo4 from "../assets/logos/logo-04.svg?raw";
import logo5 from "../assets/logos/logo-05.svg?raw";
import logo6 from "../assets/logos/logo-06.svg?raw";

const allProjects = await getCollection("projects");
const projects = allProjects
  .sort((a, b) => (a.data.order ?? 99) - (b.data.order ?? 99))
  .slice(0, 4);

const logos = [logo1, logo2, logo3, logo4, logo5, logo6];

const services = [
  {
    title: "Architectural Design",
    description: "From initial sketches to construction documents, we design homes and spaces that respond to their site and their inhabitants.",
  },
  {
    title: "Interior Design",
    description: "We curate materials, furniture, and lighting to create interiors that feel both considered and effortless.",
  },
  {
    title: "Landscape Architecture",
    description: "The spaces between buildings matter. We design gardens, courtyards, and outdoor rooms that complete the picture.",
  },
  {
    title: "Renovation & Restoration",
    description: "We breathe new life into existing structures, respecting their history while adapting them for modern living.",
  },
];

const testimonials = [
  {
    quote: "Stonehaus turned our vague ideas into a home that feels like it was always meant to be here. Their attention to materials and light is extraordinary.",
    name: "David Russo",
    role: "Homeowner, Coastal Retreat",
    avatar: avatar1,
  },
  {
    quote: "Working with this team was seamless from start to finish. They listened carefully and delivered a space that exceeded every expectation.",
    name: "Anna Bergström",
    role: "Director, Nordic Interiors",
    avatar: avatar2,
  },
  {
    quote: "The level of craft in the detailing sets them apart. Every joint, every threshold, every handle — it all feels intentional.",
    name: "Thomas Wren",
    role: "Builder, Wren Construction",
    avatar: avatar3,
  },
];
---

<BaseLayout title="Stonehaus — Architecture & Interior Design">
  <!-- Hero -->
  <section class="hero section">
    <div class="hero__inner container">
      <div class="hero__image">
        <Image src={heroImage} alt="Modern architectural home at dusk" width={800} height={533} />
      </div>
      <div class="hero__content">
        <h1>We are doing things that you need to be done, and fast!</h1>
        <p>Award-winning architecture and interior design studio crafting spaces that inspire.</p>
        <div class="hero__buttons">
          <Button href="#footer" variant="primary" size="lg">Contact us</Button>
          <Button href="/projects/" variant="secondary" size="lg">Our work</Button>
        </div>
      </div>
    </div>
  </section>

  <!-- Logo Bar -->
  <section class="logo-bar section">
    <div class="container container--narrow text-center">
      <Overline>PARTNERSHIPS</Overline>
      <h2>We work with the best</h2>
      <p class="logo-bar__subtitle">Take a look at the logos we have listed here.</p>
    </div>
    <div class="logo-bar__track">
      {logos.map((logo) => (
        <div class="logo-bar__item">
          <Fragment set:html={logo} />
        </div>
      ))}
    </div>
  </section>

  <!-- Services -->
  <section class="services section">
    <div class="container text-center">
      <Overline>OUR SERVICES</Overline>
      <h2>We offer the best</h2>
      <p class="services__subtitle">Take a look at the interiors we display here for some strange reason or another.</p>
      <div class="services__bento">
        <div class="bento-item bento-item--1">
          <Image src={bento1} alt="Modern interior design" width={600} height={400} />
        </div>
        <div class="bento-item bento-item--2">
          <Image src={bento2} alt="Architectural detail" width={400} height={400} />
        </div>
        <div class="bento-item bento-item--3">
          <Image src={bento3} alt="Scenic terrace view" width={800} height={400} />
        </div>
        <div class="bento-item bento-item--4">
          <Image src={bento4} alt="Outdoor living space" width={800} height={500} />
        </div>
        <div class="bento-item bento-item--5">
          <Image src={bento5} alt="Contemporary furniture" width={600} height={400} />
        </div>
        <div class="bento-item bento-item--6">
          <Image src={bento6} alt="Lake view dining" width={600} height={400} />
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <section class="testimonials section">
    <div class="container text-center">
      <Overline>TESTIMONIALS</Overline>
      <h2>What our customers say?</h2>
      <div class="testimonials__grid">
        {testimonials.map((t) => (
          <TestimonialCard
            quote={t.quote}
            name={t.name}
            role={t.role}
            avatar={t.avatar}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- Portfolio Highlights -->
  <section class="portfolio section">
    <div class="container container--narrow text-center">
      <Overline>PORTFOLIO</Overline>
      <h2>Explore some of our portfolio top highlights</h2>
    </div>
    <div class="container">
      <div class="portfolio__list">
        {projects.map((project, i) => (
          <ProjectCard
            title={project.data.title}
            label={project.data.label}
            description={project.data.description}
            image={project.data.image}
            href={`/projects/${project.id}/`}
            layout="overlay"
            align={i % 2 === 0 ? "right" : "left"}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="section">
    <div class="container">
      <CTA
        title="Let's chat about your project and see how we can help."
        description="Whether you're starting from scratch or reimagining an existing space, we'd love to hear about your vision."
        buttonText="Get in touch"
        layout="inline"
      />
    </div>
  </section>
</BaseLayout>

<style>
  /* Hero */
  .hero__inner {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: var(--space-xl);
    align-items: center;
  }

  .hero__image :global(img) {
    width: 100%;
    height: auto;
    border-radius: var(--radius-lg);
    object-fit: cover;
  }

  .hero__content {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  .hero__content p {
    font-size: var(--text-lg);
    max-width: 30rem;
  }

  .hero__buttons {
    display: flex;
    gap: var(--space-sm);
    flex-wrap: wrap;
  }

  /* Logo Bar */
  .logo-bar h2 {
    margin-top: var(--space-xs);
    margin-bottom: var(--space-xs);
  }

  .logo-bar__subtitle {
    font-size: var(--text-base);
    margin-bottom: var(--space-lg);
  }

  .logo-bar__track {
    display: flex;
    gap: var(--space-md);
    overflow: hidden;
    width: 100vw;
    margin-left: calc(50% - 50vw);
    padding-inline: var(--space-sm);
    justify-content: center;
  }

  .logo-bar__item {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 18rem;
    height: 10rem;
    background: var(--color--surface-off);
    border-radius: var(--radius-lg);
    flex-shrink: 0;
  }

  .logo-bar__item :global(svg) {
    fill: var(--color--front-accent);
  }

  .logo-bar__item :global(svg path) {
    fill: var(--color--front-accent);
  }

  /* Services */

  .services h2 {
    margin-top: var(--space-xs);
    margin-bottom: var(--space-xs);
  }

  .services__subtitle {
    font-size: var(--text-base);
    opacity: 0.7;
    margin-bottom: var(--space-lg);
  }

  .services__bento {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: auto auto;
    gap: var(--space-sm);
  }

  .bento-item {
    overflow: hidden;
    border-radius: var(--radius-md);
  }

  .bento-item :global(img) {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .bento-item--1 { grid-column: 1; }
  .bento-item--2 { grid-column: 2; }
  .bento-item--3 { grid-column: 3 / 5; }
  .bento-item--4 { grid-column: 1 / 3; }
  .bento-item--5 { grid-column: 3; }
  .bento-item--6 { grid-column: 4; }

  /* Testimonials */
  .testimonials h2 {
    margin-top: var(--space-xs);
    margin-bottom: var(--space-lg);
  }

  .testimonials__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-md);
    text-align: left;
  }

  /* Portfolio */
  .portfolio {
  }

  .portfolio h2 {
    margin-top: var(--space-xs);
    margin-bottom: var(--space-lg);
  }

  .portfolio__list {
    display: flex;
    flex-direction: column;
    gap: var(--space-lg);
    text-align: left;
  }

  @media (max-width: 48rem) {
    .hero__inner {
      grid-template-columns: 1fr;
    }

    .hero__content {
      order: -1;
    }

    .services__bento {
      grid-template-columns: repeat(2, 1fr);
    }

    .bento-item--1 { grid-column: 1; }
    .bento-item--2 { grid-column: 2; }
    .bento-item--3 { grid-column: 1 / 3; }
    .bento-item--4 { grid-column: 1 / 3; }
    .bento-item--5 { grid-column: 1; }
    .bento-item--6 { grid-column: 2; }

    .logo-bar__track {
      overflow-x: auto;
      justify-content: flex-start;
      -webkit-overflow-scrolling: touch;
    }

    .testimonials__grid {
      grid-template-columns: 1fr;
    }
  }
</style>
